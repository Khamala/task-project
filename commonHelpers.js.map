{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["const previewList = document.querySelector('.js-list');\npreviewList.addEventListener('click', handlerClick);\n\nasync function serviceGetTopBooks() {\n    const response = await fetch('https://books-backend.p.goit.global/books/top-books');\n    // console.log(response);\n    if (!response.ok) {\n        throw new Error(response.statusText);\n    }\n    return response.json();\n};\n\nserviceGetTopBooks()\n    .then((data) => {\n        previewList.insertAdjacentHTML(\"beforeend\", createPreviewListMarkup(data))\n    }\n    )\n    .catch((err) => console.log('Error'));\n\n\nfunction createPreviewListMarkup(arr) {\n    return arr.map(({list_name, books}) => `<li>\n    <h2>${list_name}</h2>\n    <ul>${createListMarkup(books)}</ul>\n    <button type=\"button\" class =\"js-seeMore\" data-genre=\"${list_name}\">See more</button>\n  </li>`)\n        \n}\n    \nfunction createListMarkup(arrBooks) {\n    return arrBooks.map(({_id, author, book_image, title}) => `<li data-id=\"${_id}\">\n      <img src=\"${book_image}\" alt=\"${title}\">\n      <h3>${title}</h3>\n      <p>${author}</p>\n    </li>`)  \n}\n\n\nasync function serviceGetCategory(genre) {\n    \n    const response = await fetch(`https://books-backend.p.goit.global/books/category?category=${genre}`)\n    if (!response.ok) {\n        throw new Error(response.statusText);\n    }\n    return response.json();\n}\n\nasync function handlerClick(event) {\n    if (event.target.classList.contains('js-seeMore')) {\n        // console.log(event.target.dataset);\n        const genre = event.target.dataset.genre;\n\n        const data = await serviceGetCategory(genre);\n\n        // console.log(data);\n\n        previewList.innerHTML = createListMarkup(data);\n    }\n}\n\n"],"names":["previewList","handlerClick","serviceGetTopBooks","response","data","createPreviewListMarkup","err","arr","list_name","books","createListMarkup","arrBooks","_id","author","book_image","title","serviceGetCategory","genre","event"],"mappings":"ssBAAA,MAAMA,EAAc,SAAS,cAAc,UAAU,EACrDA,EAAY,iBAAiB,QAASC,CAAY,EAElD,eAAeC,GAAqB,CAChC,MAAMC,EAAW,MAAM,MAAM,qDAAqD,EAElF,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,UAAU,EAEvC,OAAOA,EAAS,MACpB,CAEAD,EAAoB,EACf,KAAME,GAAS,CACZJ,EAAY,mBAAmB,YAAaK,EAAwBD,CAAI,CAAC,CAC5E,CACA,EACA,MAAOE,GAAQ,QAAQ,IAAI,OAAO,CAAC,EAGxC,SAASD,EAAwBE,EAAK,CAClC,OAAOA,EAAI,IAAI,CAAC,CAAC,UAAAC,EAAW,MAAAC,CAAK,IAAM;AAAA,UACjCD,CAAS;AAAA,UACTE,EAAiBD,CAAK,CAAC;AAAA,4DAC2BD,CAAS;AAAA,QAC7D,CAER,CAEA,SAASE,EAAiBC,EAAU,CAChC,OAAOA,EAAS,IAAI,CAAC,CAAC,IAAAC,EAAK,OAAAC,EAAQ,WAAAC,EAAY,MAAAC,CAAK,IAAM,gBAAgBH,CAAG;AAAA,kBAC/DE,CAAU,UAAUC,CAAK;AAAA,YAC/BA,CAAK;AAAA,WACNF,CAAM;AAAA,UACP,CACV,CAGA,eAAeG,EAAmBC,EAAO,CAErC,MAAMd,EAAW,MAAM,MAAM,+DAA+Dc,CAAK,EAAE,EACnG,GAAI,CAACd,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,UAAU,EAEvC,OAAOA,EAAS,MACpB,CAEA,eAAeF,EAAaiB,EAAO,CAC/B,GAAIA,EAAM,OAAO,UAAU,SAAS,YAAY,EAAG,CAE/C,MAAMD,EAAQC,EAAM,OAAO,QAAQ,MAE7Bd,EAAO,MAAMY,EAAmBC,CAAK,EAI3CjB,EAAY,UAAYU,EAAiBN,CAAI,CAChD,CACL"}